{"version":3,"sources":["../../src/models/bot.js"],"names":["Sequelize","require","module","exports","sequelize","DataTypes","Model","define","id","type","UUID","primaryKey","defaultValue","UUIDV4","allowNull","name","STRING","description","competitorType","ENUM","hooks","beforeCreate","event","options","agent","models","Agent","create","agentId","dataValues","associate","User","belongsTo","foreignKey"],"mappings":"AAAA;;AACA,MAAMA,YAAYC,QAAQ,WAAR,CAAlB;;AAEAC,OAAOC,OAAP,GAAiB,CAACC,SAAD,EAAYC,SAAZ,KAA0B;AACzC,MAAIC,QAAQF,UAAUG,MAAV,CAAiB,KAAjB,EAAwB;AAClCC,QAAI;AACFC,YAAMJ,UAAUK,IAAV,EADJ;AAEFC,kBAAY,IAFV;AAGFC,oBAAcZ,UAAUa,MAHtB;AAIFC,iBAAW;AAJT,KAD8B;AAOlCC,UAAM;AACJN,YAAMJ,UAAUW,MADZ;AAEJF,iBAAW;AAFP,KAP4B;AAWlCG,iBAAa;AACXR,YAAMJ,UAAUW,MADL;AAEXF,iBAAW;AAFA,KAXqB;AAelCI,oBAAgB;AACdT,YAAMJ,UAAUc,IAAV,CAAe,CAAC,aAAD,EAAgB,aAAhB,EAA+B,WAA/B,CAAf,CADQ;AAEdP,oBAAc,aAFA;AAGdE,iBAAW;AAHG;AAfkB,GAAxB,EAqBZ;AACEM,WAAO;AACLC,oBAAc,OAAOC,KAAP,EAAcC,OAAd,KAA0B;AACtC,YAAIC,QAAQ,MAAMpB,UAAUqB,MAAV,CAAiBC,KAAjB,CAAuBC,MAAvB,CAA8B;AAC9ClB,gBAAM;AADwC,SAA9B,CAAlB;AAGAa,cAAMM,OAAN,GAAgBJ,MAAMK,UAAN,CAAiBrB,EAAjC;AACD;AANI;AADT,GArBY,CAAZ;AA+BAF,QAAMwB,SAAN,GAAkB,UAAUL,MAAV,EAAkB;AAClCnB,UAAMyB,IAAN,GAAazB,MAAM0B,SAAN,CAAgBP,OAAOM,IAAvB,EAA6B;AACxCE,kBAAY;AAD4B,KAA7B,CAAb;AAGA3B,UAAMoB,KAAN,GAAcpB,MAAM0B,SAAN,CAAgBP,OAAOC,KAAvB,EAA8B,EAACO,YAAY,SAAb,EAA9B,CAAd;AACD,GALD;AAMA,SAAO3B,KAAP;AACD,CAvCD","file":"bot.js","sourcesContent":["'use strict';\nconst Sequelize = require('sequelize')\n\nmodule.exports = (sequelize, DataTypes) => {\n  var Model = sequelize.define('Bot', {\n    id: {\n      type: DataTypes.UUID(),\n      primaryKey: true,\n      defaultValue: Sequelize.UUIDV4,\n      allowNull: false,\n    },\n    name: {\n      type: DataTypes.STRING,\n      allowNull: true,\n    },\n    description: {\n      type: DataTypes.STRING,\n      allowNull: true,\n    },\n    competitorType: {\n      type: DataTypes.ENUM([\"COMPETITIVE\", \"AGGREGATION\", \"OBJECTIVE\"]),\n      defaultValue: \"COMPETITIVE\",\n      allowNull: true,\n    },\n  },\n  {\n    hooks: {\n      beforeCreate: async (event, options) => {\n        let agent = await sequelize.models.Agent.create({\n          type: \"BOT\",\n        });\n        event.agentId = agent.dataValues.id\n      }\n    }\n  });\n  Model.associate = function (models) {\n    Model.User = Model.belongsTo(models.User, {\n      foreignKey: 'userId',\n    })\n    Model.Agent = Model.belongsTo(models.Agent, {foreignKey: 'agentId'})\n  }\n  return Model;\n};\n"]}