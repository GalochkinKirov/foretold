{"version":3,"sources":["../../src/bots/resolution.js"],"names":["models","require","Sequelize","fetch","setup","getBot","Op","Resolution","run","resolutionBot","resolutionAgent","getAgent","measurables","Measurable","needsResolutionResponse","m","processResolution","id","resolution"],"mappings":";;AAIA;;;;;;AAJA,MAAMA,SAASC,QAAQ,WAAR,CAAf;AACA,MAAMC,YAAYD,QAAQ,WAAR,CAAlB;AACA,MAAME,QAAQF,QAAQ,YAAR,CAAd;AACA,MAAM,EAACG,KAAD,EAAQC,MAAR,KAAkBJ,QAAQ,wBAAR,CAAxB;;AAEA,MAAMK,KAAKJ,UAAUI,EAArB;;AAEA,MAAMC,UAAN,CAAiB;AACf,QAAMC,GAAN,GAAY;AACV,UAAMC,gBAAgB,MAAMJ,OAAO,gBAAP,CAA5B;AACA,UAAMK,kBAAkB,MAAMD,cAAcE,QAAd,EAA9B;AACA,UAAMC,cAAc,MAAMZ,OAAOa,UAAP,CAAkBC,uBAAlB,EAA1B;AACA,SAAK,MAAMC,CAAX,IAAgBH,WAAhB,EAA4B;AACxB,YAAMG,EAAEC,iBAAF,CAAoBN,gBAAgBO,EAApC,CAAN;AACH;AACF;AARc;;AAWjB,IAAIC,aAAa,IAAIX,UAAJ,EAAjB;AACAW,WAAWV,GAAX","file":"resolution.js","sourcesContent":["const models = require(\"../models\")\nconst Sequelize = require('sequelize')\nconst fetch = require(\"node-fetch\");\nconst {setup, getBot} = require(\"../lib/adminBotManager\");\nimport _ from \"lodash\"\nconst Op = Sequelize.Op\n\nclass Resolution {\n  async run() {\n    const resolutionBot = await getBot(\"RESOLUTION_BOT\");\n    const resolutionAgent = await resolutionBot.getAgent();\n    const measurables = await models.Measurable.needsResolutionResponse();\n    for (const m of measurables){\n        await m.processResolution(resolutionAgent.id)\n    }\n  }\n}\n\nlet resolution = new Resolution();\nresolution.run();"]}