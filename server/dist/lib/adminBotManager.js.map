{"version":3,"sources":["../../src/lib/adminBotManager.js"],"names":["models","require","USERS","BOTS","setup","user","User","create","name","ADMIN","auth0Id","Bot","userId","id","RESOLUTION_BOT","getUser","symbol","users","findAll","where","length","getBot","bots","bot"],"mappings":";;;;;AAAA,MAAMA,SAASC,QAAQ,WAAR,CAAf;;AAEA,MAAMC,QAAQ;AACV,aAAS;AADC,CAAd;;AAIA,MAAMC,OAAO;AACT,sBAAkB;;AAGtB;AAJa,CAAb,CAKA,MAAMC,QAAQ,kBAAkB;AAC5B,UAAMC,OAAO,MAAML,OAAOM,IAAP,CAAYC,MAAZ,CAAmB,EAACC,MAAMN,MAAMO,KAAb,EAAoBC,SAAS,EAA7B,EAAnB,CAAnB;AACA,UAAMV,OAAOW,GAAP,CAAWJ,MAAX,CAAkB,EAACK,QAAQP,KAAKQ,EAAd,EAAkBL,MAAML,KAAKW,cAA7B,EAAlB,CAAN;AACH,CAHD;;AAKO,MAAMC,4BAAU,gBAAeC,MAAf,EAAsB;AACzC,UAAMC,QAAQ,MAAMjB,OAAOM,IAAP,CAAYY,OAAZ,CAAoB;AACpCC,eAAO;AACHX,kBAAMN,MAAMc,MAAN;AADH;AAD6B,KAApB,CAApB;AAKA,QAAIC,MAAMG,MAAN,IAAgB,CAApB,EAAsB;AAClB,cAAMf,OAAO,MAAML,OAAOM,IAAP,CAAYC,MAAZ,CAAmB,EAACC,MAAMN,MAAMc,MAAN,CAAP,EAAsBN,SAAS,EAA/B,EAAnB,CAAnB;AACA,eAAOL,IAAP;AACH,KAHD,MAGO;AACH,eAAOY,MAAM,CAAN,CAAP;AACH;AACJ,CAZM;;AAcA,MAAMI,0BAAS,gBAAeL,MAAf,EAAsB;AACxC,UAAMM,OAAO,MAAMtB,OAAOW,GAAP,CAAWO,OAAX,CAAmB;AAClCC,eAAO;AACHX,kBAAML,KAAKa,MAAL;AADH;AAD2B,KAAnB,CAAnB;AAKA,QAAIM,KAAKF,MAAL,IAAe,CAAnB,EAAqB;AACjB,cAAMf,OAAOU,QAAQ,OAAR,CAAb;AACA,cAAMQ,MAAM,MAAMvB,OAAOW,GAAP,CAAWJ,MAAX,CAAkB,EAACK,QAAQP,KAAKQ,EAAd,EAAkBL,MAAML,KAAKa,MAAL,CAAxB,EAAlB,CAAlB;AACA,eAAOO,GAAP;AACH,KAJD,MAIO;AACH,eAAOD,KAAK,CAAL,CAAP;AACH;AACJ,CAbM","file":"adminBotManager.js","sourcesContent":["const models = require(\"../models\")\n\nconst USERS = {\n    \"ADMIN\": \"Admin Bot Coordinator\"\n}\n\nconst BOTS = {\n    \"RESOLUTION_BOT\": \"Resolution Bot\"\n}\n\n//Not currently used, because get requests create on demand.\nconst setup = async function () {\n    const user = await models.User.create({name: USERS.ADMIN, auth0Id: \"\"});\n    await models.Bot.create({userId: user.id, name: BOTS.RESOLUTION_BOT});\n}\n\nexport const getUser = async function(symbol){\n    const users = await models.User.findAll({\n        where: {\n            name: USERS[symbol],\n          }\n    })\n    if (users.length == 0){\n        const user = await models.User.create({name: USERS[symbol], auth0Id: \"\"});\n        return user\n    } else {\n        return users[0];\n    }\n}\n\nexport const getBot = async function(symbol){\n    const bots = await models.Bot.findAll({\n        where: {\n            name: BOTS[symbol],\n          }\n    })\n    if (bots.length == 0){\n        const user = getUser(\"ADMIN\");\n        const bot = await models.Bot.create({userId: user.id, name: BOTS[symbol]});\n        return bot\n    } else {\n        return bots[0];\n    }\n}"]}